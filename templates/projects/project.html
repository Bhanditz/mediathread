{% extends "base.html" %}
{% load smartif collaborations user_projects coursetags revision %}

{% block title %}
    {% if project.title %}{{project.title}}{% else %}New Composition{% endif %}
{% endblock %}

{% block css %}
    {{ block.super }}
    <link rel="stylesheet" href="/site_media/css/project.css?version={%revision%}" />
    <link rel="stylesheet" href="/site_media/js/sherdjs/lib/mcePlugin_citation/skins/minimalist/citation.css?version={%revision%}" />
    
    <script type="text/javascript" src="/jsi18n"></script>
    
    <!--All the annotation css -->
    {% include "djangosherd/annotator_resources_css.html" %}
{% endblock %}

{% block js %}
    <!--All the annotation javascript/css -->
    {% include "djangosherd/annotator_resources.html" %}

    <script type="text/javascript" src="/site_media/js/mustache/mustache.js?version={%revision%}"></script>
    <script type="text/javascript" src="/site_media/js/mediathread_mustache.js?version={%revision%}"></script>
    
    <script type="text/javascript" src="/jsi18n"></script>
    <script type="text/javascript" src="/media/js/core.js"></script>
    <script type="text/javascript" src="/media/js/SelectFilter2.js"></script>
    <script type="text/javascript" src="/media/js/SelectBox.js"></script>
    
    <script type="text/javascript" src="/site_media/js/project/projectpanel.js?version={%revision%}"></script>
    
    <script type="text/javascript" src="/site_media/js/assetmgr/collection.js?version={%revision%}"></script>
    <script type="text/javascript" src="/site_media/js/jquery.colorBlend.js"></script>
    <script type="text/javascript" src="/site_media/js/ajaxDelete.js?version={%revision%}"></script>
    <script type="text/javascript" src="/site_media/js/panel.js?version={%revision%}"></script>
        
    <script type="text/javascript">
        function resizeProjectPage() {
            var visible = getVisibleContentHeight();

            // Resize the outer table. This takes care of the panhandles & panhandle stripes
            jQuery("#sliding-content-container").css('height', visible + "px");

            // tinyMCE project editing window
            jQuery('#composition-project-content_tbl').css('height', (visible - 100) + "px");
            jQuery('#composition-essay-space').css('height', (visible - 112) + "px");
            
            // scrolling media (collections) window
            jQuery('div.scroll').css('height', (visible - 133) + "px");
        }
      
        jQuery(document).ready(function () {
            PanelManager.init({ 
                'container': 'sliding-content-container',
                'url': MediaThread.urls['project']({{project.id}})
            });

            jQuery("table#sliding-content-container").ajaxStop(function(){
                jQuery(this).removeClass("ajaxLoading");
            });
        });
  </script>
{% endblock %}

{% block content %}
    {{ block.super }}
    
    <table id="sliding-content-container" class="ajaxLoading">
        <tr id="sliding-content-row" class="sliding-content-row">
            <td id="sliding-content-last-column" class="filler"></td>
        </tr>
    </table>

{% endblock %}    